<!DOCTYPE html>
<html>
<head>
<title>zds_setcallbackfunc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link type="text/css" href="../styles/style.css" rel="stylesheet" />
<link type="text/css" href="../styles/zwcadcss.css" rel="StyleSheet" />
<script language="javascript" src="../scripts/jquery-1.7.2.min.js"></script>
<script language="javascript" src="../scripts/table-odd-even.js"></script>
</head>
<body>
<div id="main" class="main">
<div id="header" class="header">
<div class="header_resize">
<div class="banner">
	<div class="banner_img_right"><img src="../images/banner_img_right.png"></div>
	<div class="hear_text">ZWCAD 2024 Help</div>
</div>
</div>
</div>
<div class="clr"></div>
    <div class="Tophead"><span class="Tophead_text">zds_setcallbackfunc</span></div> 
<div class="clr"></div>
<div id="content" class="content">
    <div class="content_resize">
    <div class="article">
    <div class="clr"></div>
<!--main-->
<p class="cmd_line"><font color="#186DAD"><b>int zds_setcallbackfunc (int [int flag, void *arg1, void *arg2, void *arg3]);</b></font></p>
<p class="body_text">ZWCAD... call me at this function.</p>
<hr algin="left" />
<p class="body_text">This function intercepts callbacks from ZWCAD&reg; commands and sends them to a specified function. For example, ZWCAD sends a callback that it is going to erase an entity before doing so. This callback could be sent to the function specified by zds_setcallbackfunc.</p>
<p class="body_text">The zds_setcallbackfunc function is unique to the implementation of ZDS for ZWCAD.</p>
<hr algin="left" />
<p class="define_head_1">Example</p>
<p class="define_text_1">Suppose you need to know whenever the ERASE command is used in ZWCAD so that application-specific data can be stripped from entities before they are erased. You create a function named cbfunc to monitor callbacks from ZWCAD so you can trap all uses of the ERASE command.</p>
<p class="define_text_1">First, you would issue the following when your ZDS application is loaded:</p>
<p class="prompt">zds_setcallbackfunc(cbfunc);</p>
<p class="define_text_1">From then on, all callbacks from ZWCAD will pass through cbfunc. When the ERASE command is used in ZWCAD, cbfunc will detect it, as in the following section of code:</p>
<p class="prompt">int cbfunc(int flag,void *arg1,void *arg2,void *arg3)</p>
<p class="prompt">{</p>
<p class="prompt">int res = RTNORM;</p>
<p class="prompt">switch (flag) {</p>
<p class="prompt">&nbsp;
// Command Start/End.</p>
<p class="prompt">&nbsp;case ZDS_CBCMDBEGIN:</p>
<p class="prompt">&nbsp;
// arg1="command name" cast as (char *)
</p>
<p class="prompt">&nbsp;// Callback return RTERROR will cause command to not be called.</p>
<p class="prompt">&nbsp;// Any processing needed for the erase command goes here.</p>
<p class="prompt">&nbsp;// For example, if you wanted to disable the erase command to</p>
<p class="prompt">&nbsp;// prevent users from erasing entities, you could use the</p>
<p class="prompt">&nbsp;// following code:</p>
<p class="prompt">&nbsp;if (!stricmp(arg1, "erase"))</p>
<p class="prompt">&nbsp;res = RTERROR;</p>
<p class="prompt">&nbsp;break;</p>
<p class="prompt">&nbsp;case default:
break;</p>
<p class="prompt">&nbsp;}</p>
<p class="prompt">return res;</p>
<p class="prompt">}</p>
<p class="define_text_1">As the comment above indicates, the callback return of RTERROR will cause the command not to be issued. This is because ZWCAD broadcasted the fact that it is about to run the ERASE command. The program intercepted ERASE so a different action could be taken. If you wanted to know when the ERASE command had been completed, you could add a case for ZDS_CBCMDBEGIN and compare the argument sent by IntellCAD to see if it is what you are looking for.</p>
<hr algin="left" />
<p class="define_head_1">Tell me about...</p>
<ul class="command_ul">
	<li>
	<p class="define_text" style="margin-left: 0pt"><a href="Programming%20Overview%20of%20ZDS.htm">Programming Overview of ZDS (ZWCAD Development System)</a></p>
	</li>
</ul>
<!--main-->
</div>
</div>
</div>
<div class="blank"></div>
<div class="footer_placeholder"></div>
</div>
<div id="fbg" class="fbg">
<div class="footer">
<span class="lr">&copy; 1998-2023 ZWSOFT CO., LTD.(Guangzhou). All Rights Reserved.</span>
<div class="clr"></div>
</div>
</div> 
</body>
</html>